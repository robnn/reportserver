<mat-card class="large-card centered">
  <mat-card-title>{{ "SAVED_QUERIES" | translate }}</mat-card-title>
  <mat-card-content>

    <span *ngIf="!queries || queries.length == 0">{{ "NO_QUERIES" | translate }}</span>
    <mat-accordion *ngIf="queries && queries.length > 0">
      <mat-expansion-panel *ngFor="let query of queries">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <span>{{ query.queryName }} </span>
          </mat-panel-title>
          <mat-panel-description>
            {{ getConnectionInfoForUuid(query.connectionUuid) }}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <mat-form-field color="accent" *ngIf="query.creatorUsername">
          <input matInput readonly="true" placeholder="{{ 'CREATOR_USERNAME' | translate }}" name="username" value="{{ query.creatorUsername }}"
                 >
          <mat-label>
            <mat-icon>face</mat-icon>
            {{ 'CREATOR_USERNAME' | translate }} </mat-label>
        </mat-form-field>
        <mat-form-field>
          <mat-select disabled="true" placeholder="{{ 'VISIBILITY' | translate }}" value="{{ query.visibility }}" name="queryVisibility">
            <mat-option *ngFor="let type of types" [value]="type">
              {{ type | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <span>{{ "QUERY" | translate }}:</span>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <pre><code [highlight]="query.queryString"></code></pre>
        </mat-expansion-panel>
        <mat-expansion-panel *ngIf="query.arrayParameters.length !== 0">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <span>{{ "PARAMETERS" | translate }}:</span>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <ul *ngFor="let param of query.arrayParameters">
            <li>{{ param.parameterName }} : {{ param.parameterValue }}</li>
          </ul>
        </mat-expansion-panel>
        <mat-expansion-panel *ngIf="query.columns.length !== 0">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <span>{{ "COLUMNS" | translate }}:</span>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <ul *ngFor="let column of query.columns">
            <li>{{ column.columnName }} : {{ column.columnType }}</li>
          </ul>
        </mat-expansion-panel>
        <mat-expansion-panel *ngIf="query.teamUuidsAndNames.length !== 0">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <span>{{ "TEAMS" | translate }}:</span>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <ul *ngFor="let team of query.teamUuidsAndNames">
            <li>{{ team.name }}</li>
          </ul>
        </mat-expansion-panel>
        <div class="flexed">
          <div class="fill-remaining-space"></div>
          <button mat-button color="primary" (click)="exportQuery(query)">{{"EXPORT_XLSX" | translate}}</button>
          <button mat-button color="primary" (click)="executePagedQuery(query)">{{"EXECUTE_QUERY" | translate}}</button>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </mat-card-content>
  <mat-card-actions>
  </mat-card-actions>

  <app-result-table></app-result-table>
</mat-card>